id,recommendation,optimized_sql
1,"SimpleSelectStar: SELECT * on table: table1. Check that all columns are needed.","null"
2,"CTEsEvalMultipleTimes: CTE with multiple references: alias a defined at line 1 is referenced 2 times.","CREATE TEMP TABLE A AS
SELECT
  reference_bases,
  start_position,
  COUNT(1) AS ct
FROM
  `bigquery-public-data.human_genome_variants.1000_genomes_phase_3_optimized_schema_variants_20150220`
WHERE
  reference_bases IN ('AT', 'TA', 'AT')
GROUP BY
  1,
  2;

WITH B AS (
  SELECT
    reference_bases,
    COUNT(1) AS ct
  FROM
    A
  GROUP BY
    1
)
SELECT
  A.*,
  A.ct / B.ct
FROM
  A
JOIN
  B
  ON B.reference_bases = A.reference_bases;"
3,"SemiJoinWithoutAgg: Subquery in filter without aggregation at line 6.
DynamicPredicate: Using subquery in filter at line 6. Converting this dynamic predicate to static might provide better performance.","DECLARE var1 [DATATYPE] DEFAULT (SELECT DISTINCT col2 FROM table2);
SELECT
  col1
FROM
  table1
WHERE
  col2 NOT IN (var1);"
4,"OrderByWithoutLimit: ORDER BY clause without LIMIT at line 5.","select
	col1
from
	table1
order by
	col1
limit 1000;"
5,"StringComparison: REGEXP_CONTAINS at line 6. Prefer LIKE when the full power of regex is not needed (e.g. wildcard matching).","select
  t1.title
from
  `bigquery-public-data.samples.wikipedia` t1
where
  t1.title like '%shakespeare%';"
6,"LatestRecordWithAnalyticFun: Seems like you might be using analytical function row_number in line 7 to filter the latest record in line 12.","SELECT
  taxi_id,
  trip_seconds,
  fare
FROM (
  SELECT
    taxi_id,
    trip_seconds,
    fare,
    ARRAY_AGG(
      STRUCT(
        taxi_id,
        trip_seconds,
        fare
      ) ORDER BY fare DESC LIMIT 1
    )[OFFSET(0)] AS event
  FROM
    `bigquery-public-data.chicago_taxi_trips.taxi_trips`
  GROUP BY
    taxi_id
);"
7,"DynamicPredicate: Using subquery in filter at line 9. Converting this dynamic predicate to static might provide better performance.","DECLARE var1 [DATATYPE] DEFAULT (
  SELECT
    id
  FROM
    users
  WHERE
    location LIKE '%New York'
  GROUP BY
    id
  ORDER BY
    SUM(up_votes) DESC
  LIMIT 10
);
SELECT
  *
FROM
  comments c
JOIN
  users u ON c.user_id = u.id
WHERE
  u.id IN (var1);"
8,"WhereOrder: LIKE filter in line 8 precedes a more selective filter.","SELECT
     repo_name,
     id,
     ref
   FROM
     `bigquery-public-data.github_repos.files`
   WHERE
     repo_name = 'cdnjs/cdnjs'
     and ref like '%master%';"
